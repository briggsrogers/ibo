(this.webpackJsonppourover=this.webpackJsonppourover||[]).push([[0],{20:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAYAAABw4pVUAAAEt0lEQVR4Xu2bTVYUMRDH/zWCW/EEjgvAnXgC8QTiVsf34ATICZATiCdwfLZuHU8gnkDcabNwuMG4FGTKl/nQ8QMl6VS60lP9HhteV6Xy/6WSdCVDsEeVAqQqGgsGBkTZIDAgBkSZAsrCsQwxIMoUUBaOZYgBUaaAsnAsQwyIMgWUhWMZYkCUKaAsHMsQA6JMAWXhWIYYEGUKKAvHMsSAKFNAWTiWIQZEmQLKwrEMMSC/KsCr9++CaQNMbRCWAKyN3+A+mPogdn89fL38jvrdQRX9+MZmG8PT24BrD0sgbgPUnvg8BGMA0CFaZwf06dWbKm2F2taSIWNhvj0BsOEZeA8tPKWPxYGPHd/orOMMuyCse9gNAO6htbhHH7t9D7tKryYFMhmhuwBtVoqacQAMd+jo1eG//PDy/TWg9cQTxJ8umfZxemmvaoZepM/JgIxG6RCvgdG0FONx09cWlUXvb854tbMNxn6Mhn5OoXzvf4OgantJgMQXZ6bbTPt09GJn+h9uby7h8rdnAdPhRbQcgGmHjl50L/JyyDviQHj1wSMwufVC8OEulS+3JjDe/twYCDXJtCUFRRQIr3Tcou2mqQQPdwFyO7TJLk20yQF4eEdi+hIDMtlJvY+4Zogq7O+c+zhZvBV7oZcDstx5W3l3469Saos9KovHMRsVATLZUbm5vPlPa+F6zO8UGSDzkR3TwfacyqLad9XMsI0OZLJ2fG5+avzo4YDK4mqs/sYHsvxwE8TuO2B+nhbu+JZzzhMnPpCVBz2A7s4PDVcHxVM6Kh7F6LMAkI7b6qb4FojR/zg+CO/oU+FTuDy3XQkgHKeXGXkxIPpgUVlEGdxRnMzKwyud+csQAAZEV5IcU1lMTx4rRWYZUkm+ibHyNcSd4t2M0c98fPAbKl/6Hkf/tXvxM2S5sw/Cdj5iRog04vlIfCDjo9r5KCxOWUYsMEYH4mLklY47774SYezl4CLagu46KwXEnRHs5qBm5RgjTldyQMYXDdxdpqZnSdTsEAMymraSXG6oPL6rOrh33jWkUMciU9Y0GG5y5TdihXcWniyQ8dTlvkuuhY4YpXYfqCxEKtqiQEZTl7vOSS13F7cp68kHnCysx75tMh144kAaBkUUhuii/vtU04BMEYeRFEjmmZIERnIgmUJJBqMWIJlBSQqjNiCZQEkOo1YgyqHUAqN2IEqh1AZDBRBlUGqFoQaIEii1w1AFpGYoxzhZWJMqh/jU45KUTnwCquGL/gt4uC7x8zSffietZfkGlhCKKhjqpqxZcAmgqIOhGojwmqIShnogQlDUwsgCSGQoqmFkAyQSFPUwsgJSEUoWMLIDEgglGxhZAvGEkhWMbIFcEEp2MLIG8h8oWcLIHsg5UI7Bww0ttSnfspG64qJvB0ZQ3A3JxbPxL5hOL/U0VG1D+tGIDAntuFa7RmSIVnFD4jIgIaoJ2hgQQXFDXBuQENUEbQyIoLghrg1IiGqCNgZEUNwQ1wYkRDVBGwMiKG6IawMSopqgjQERFDfEtQEJUU3QxoAIihvi2oCEqCZoY0AExQ1xbUBCVBO0MSCC4oa4NiAhqgnaGBBBcUNcG5AQ1QRtDIiguCGuDUiIaoI23wHFw7p0fJYI1QAAAABJRU5ErkJggg=="},22:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABcAAAAcCAYAAACK7SRjAAACx0lEQVRIS41WXXrSUBA9c2n6WroC2zeFfp+4AkmDz4UVWFdgXYF0BcIKhBWIzzYCKxA+CfomrMD0VSTjd3/yc5MQyRs3kzNnzpyZC6Hi4enTC+xPbkBoA9wGUDfhIUAzMGaonYzJXYRlMFR2qECj2nsAt1XJM+9GEM67fJICOD8864LExwzLGGMJsGFIsoLnucQhIurRq9UsPrfA2W/cAiSB42cLcB8impH7c5MF09UJKdUAoLP0Hb8hbz2SvxNww/hTEkQYg5y7Q3rGcTxt1cG7ARivk28jcmUFClwFRLtfqRRp9iM1R67qEMK51OBfm6MkM2FM10FpI/nLVRs1Yrr+Pi81QhYHdE/GGZK1fLbkBRe2tqqq2DkZK/IA4nSYlU0r8GdjehCSXY4thwre76YgtErlYSxQc1wrgX/VB1iSAfFDcwLCjfpYOOdWoFUmPwKkXACwdFXskCF5wV3aYDUjSglivykt9gTAkrwgYWia/DuWC8JpxYlz5RdJ+c2FnAMJzobNnLy19K3mJpsneKp/0T15q77Vi0z5MNZLvvUbM4BeHgletCb7TSnFBwV4GLwhl9AZwDbzaaOFiL4Z5hPyVj2buWane7W/zE4wp8yToJC84NwG0NqZsxEED/FX1CHwFuBuqZx6IFWviLPacdSjzo9J2vks+zIz8iME2uSuJQndK7341BohzpbPmFEncC32qrHRxF5OKmILwd0ssAI3kijw/EG+Oeq9nrwuIMz0RhuI00l+qdnLj+ca3LIdQgh284zKRLEq1ApI6+oVIfhFunL95gCQjZLZimNdBW6kTYEBNbX5yyK115EJCsCMz9QJlJNscG0jeU1p+/0nQfEewBLCace9KN6hRyYo2ZgWcIF56u/qCo4BPgie2q8okSJg7/gC45hk6f+Wygo0pXg1HwSuZH4wQerJSuCjwEslgu2KQzPwD5pruTynmrRzAAAAAElFTkSuQmCC"},24:function(e,t,a){e.exports=a(59)},29:function(e,t,a){},30:function(e,t,a){},31:function(e,t,a){},32:function(e,t,a){},36:function(e,t,a){},37:function(e,t,a){},38:function(e,t,a){},39:function(e,t,a){},41:function(e,t,a){},59:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),r=a(19),s=a.n(r),l=(a(29),a(2)),o=a(3),c=a(1),u=a(4),d=a(5),m=(a(30),a(31),function(e){var t="favourites",a=!1,n=window.localStorage.getItem(t);n||(n="[]");var i=JSON.parse(n);if(i.indexOf(e)>-1){for(var r=i.length-1;r>=0;r--)i[r]===e&&i.splice(r,1);a=!1}else a=!0,i.push(e);return window.localStorage.setItem(t,JSON.stringify(i)),a}),p=function(e){var t=window.localStorage.getItem("favourites");return t||(t="[]"),JSON.parse(t).indexOf(e)>-1},h=a(20),f=a.n(h),E=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).filterField=i.a.createRef(),n.tabs=["filter","about"],n.state={selectedView:"filter",expandedView:!1},n.onFormInput=n.onFormInput.bind(Object(c.a)(n)),n.setTab=n.setTab.bind(Object(c.a)(n)),n.filterFunctions={favourite:function(e){return p(e.id)},hotfood:function(e){return e.fields.Menu},takeaway:function(e){return e.fields.TakeAway},accessible:function(e){return e.fields.Accessible},sitinside:function(e){return e.fields.SitInside},sitoutside:function(e){return e.fields.SitOutside},goodforwork:function(e){return e.fields.GoodForWork},goodforgroups:function(e){return e.fields.GoodForGroups},onlineshop:function(e){return e.fields.ShopUrl},serving:function(e){return e.fields.CovidOpen},fiveKM:function(e){return parseInt(e.distanceFromUser)<=5},tenKM:function(e){return parseInt(e.distanceFromUser)<=10},twentyKM:function(e){return parseInt(e.distanceFromUser)<=20},stock3FE:function(e){return e.fields.LocalStocklist&&e.fields.LocalStocklist.indexOf("3FE")>-1},stockCP:function(e){return e.fields.LocalStocklist&&e.fields.LocalStocklist.indexOf("Cloud Picker")>-1},stockFC:function(e){return e.fields.LocalStocklist&&e.fields.LocalStocklist.indexOf("Full Circle")>-1},stockFH:function(e){return e.fields.LocalStocklist&&e.fields.LocalStocklist.indexOf("Farmhand")>-1}},n}return Object(o.a)(a,[{key:"onFormInput",value:function(e){var t=[],a=this.filterField.current.elements,n=Object.values(a);for(var i in n)n[i].checked&&t.push(n[i].name);this.filterEntriesAndUpdate(t)}},{key:"filterEntriesAndUpdate",value:function(e){var t=this,a=this.props,n=a.allEntries,i=a.onFilter,r=a.toggleFilterApplied,s=n;e.length>0?(e.forEach((function(e){s=s.filter(t.filterFunctions[e])})),i(s),r(!0)):(i(s=n),r(!1))}},{key:"setTab",value:function(e){this.setState({selectedView:e})}},{key:"render",value:function(){var e=this,t=this.props.active,a=this.state.selectedView;return i.a.createElement("div",{className:"FilterView","data-active":t},i.a.createElement("div",{className:"FilterViewInner"},i.a.createElement("div",{className:"FilterHeader"},i.a.createElement("h1",{onClick:function(){return e.setTab("filter")},"data-selected":"filter"===a},"Filters"),i.a.createElement("h1",{onClick:function(){return e.setTab("about")},"data-selected":"about"===a},"About")),"filter"===a?i.a.createElement("div",{className:"FilterField"},i.a.createElement("form",{onInput:this.onFormInput,ref:this.filterField},i.a.createElement("label",{className:"FilterContainer"},i.a.createElement("input",{type:"checkbox",id:"favourite",name:"favourite"}),i.a.createElement("span",{className:"Checkmark"},i.a.createElement("img",{src:f.a,alt:""}),"favourites")),i.a.createElement("label",{className:"FilterContainer"},i.a.createElement("input",{type:"checkbox",id:"hotfood",name:"hotfood"}),i.a.createElement("span",{className:"Checkmark"},"hot food")),i.a.createElement("label",{className:"FilterContainer"},i.a.createElement("input",{type:"checkbox",id:"accessible",name:"accessible"}),i.a.createElement("span",{className:"Checkmark"},"accessible")),i.a.createElement("label",{className:"FilterContainer"},i.a.createElement("input",{type:"checkbox",id:"goodforwork",name:"goodforwork"}),i.a.createElement("span",{className:"Checkmark"},"good for work")),i.a.createElement("label",{className:"FilterContainer"},i.a.createElement("input",{type:"checkbox",id:"sitinside",name:"sitinside"}),i.a.createElement("span",{className:"Checkmark"},"sit inside")),i.a.createElement("label",{className:"FilterContainer"},i.a.createElement("input",{type:"checkbox",id:"sitoutside",name:"sitoutside"}),i.a.createElement("span",{className:"Checkmark"},"sit outside")),i.a.createElement("span",{className:"Divider"},"Pandemic Preferences"),i.a.createElement("label",{className:"FilterContainer"},i.a.createElement("input",{type:"checkbox",id:"onlineshop",name:"onlineshop"}),i.a.createElement("span",{className:"Checkmark"},"shop online")),i.a.createElement("label",{className:"FilterContainer"},i.a.createElement("input",{type:"checkbox",id:"serving",name:"serving"}),i.a.createElement("span",{className:"Checkmark"},"now serving")),i.a.createElement("label",{className:"FilterContainer"},i.a.createElement("input",{type:"checkbox",id:"tenKM",name:"tenKM"}),i.a.createElement("span",{className:"Checkmark"},"within 10km")),i.a.createElement("label",{className:"FilterContainer"},i.a.createElement("input",{type:"checkbox",id:"tenKM",name:"tenKM"}),i.a.createElement("span",{className:"Checkmark"},"within 20km")),i.a.createElement("span",{className:"Divider"},"Beans Used"),i.a.createElement("label",{className:"FilterContainer"},i.a.createElement("input",{type:"checkbox",id:"stock3FE",name:"stock3FE"}),i.a.createElement("span",{className:"Checkmark"},"3FE")),i.a.createElement("label",{className:"FilterContainer"},i.a.createElement("input",{type:"checkbox",id:"stockCP",name:"stockCP"}),i.a.createElement("span",{className:"Checkmark"},"Cloud Picker")),i.a.createElement("label",{className:"FilterContainer"},i.a.createElement("input",{type:"checkbox",id:"stockFC",name:"stockFC"}),i.a.createElement("span",{className:"Checkmark"},"Full Circle")),i.a.createElement("label",{className:"FilterContainer"},i.a.createElement("input",{type:"checkbox",id:"stockFH",name:"stockFH"}),i.a.createElement("span",{className:"Checkmark"},"Farmhand")))):null,"about"===a?i.a.createElement("div",{className:"ScrollView"},i.a.createElement("p",null,"There are two scenarios in which you might say \u201coof\u201d;"),i.a.createElement("p",null,"Something terrible has happened."),i.a.createElement("p",null,"But also, when you\u2019ve just tried something delicious."),i.a.createElement("p",null,"OoF is a guide to some of the best coffee in ireland."),i.a.createElement("p",null,"Ireland ranks in the top speciality coffee countries in the world, there are amazing people doing incredible work across our island to bring your banging cups of coffee. By buying from these shops and roasteries, you directly support people and businesses in your community. These decisions and your contributions will help ensure that the scene we know and love remains as strong and vibrant, after, as it was before."),i.a.createElement("p",null,"-KW"),i.a.createElement("br",null),i.a.createElement("br",null),i.a.createElement("br",null),i.a.createElement("br",null),i.a.createElement("br",null),i.a.createElement("br",null)):null))}}]),a}(i.a.Component),v=(a(32),function(){return navigator.userAgent.match(/(iPad)|(iPhone)|(iPod)|(android)|(webOS)/i)}),g=a(21),k=a.n(g),b=(a(35),a(36),a(22)),C=a.n(b),y=(a(37),function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){return i.a.createElement("div",{className:"LinkContainer"},i.a.createElement("a",{href:this.props.href,target:"_blank",rel:"noopener noreferrer"},this.props.cta))}}]),a}(i.a.Component)),w=(a(38),function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){var e=this;return i.a.createElement("div",{className:"ButtonWithHintContainer"},i.a.createElement("span",{className:"Hint"},this.props.hint),i.a.createElement("button",{"data-type":this.props.type,onClick:function(){window.open("".concat(e.props.href),"_blank")}},i.a.createElement("span",null,this.props.cta)))}}]),a}(i.a.Component)),A=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={isFavourite:p(n.props.data.id)},n.onSave=n.onSave.bind(Object(c.a)(n)),n}return Object(o.a)(a,[{key:"handleDrag",value:function(){console.log("Drag")}},{key:"onSave",value:function(e){e.stopPropagation();var t=this.props.data.id;this.setState({isFavourite:m(t)})}},{key:"render",value:function(){var e=this,t=this.props.data.fields,a=t.Name,n=t.PlaceName,r=t.ShopUrl,s=t.Notes,l=t.Website,o=t.IG,c=t.LocalStocklist,u=t.CovidOpen,d=t.Latitude,m=t.Longitude,p=this.props.data.distanceFromUser,h=this.props.expanded,f=this.state.isFavourite,E="https://www.google.com/maps/dir/?api=1&destination=".concat(d,"%2C").concat(m,"&mode=bicycling");return i.a.createElement("div",{className:"CardContainer"},i.a.createElement("div",{className:"Card","data-expanded":h},i.a.createElement("div",{className:"TopLockup"},i.a.createElement("div",{className:"Title"},a),v()?i.a.createElement("div",{className:"ToggleCard","data-expanded":h}):null),i.a.createElement("div",{className:"LocationBar"},i.a.createElement("div",{className:"Location"},i.a.createElement("img",{src:C.a,alt:""}),i.a.createElement("span",null,n),null!==p?i.a.createElement("div",{className:"Distance"},i.a.createElement("span",null,i.a.createElement("a",{href:E,target:"_blank"},p," km away"))):null),i.a.createElement("div",{className:"Status"},i.a.createElement("span",null,!0===u?"Now Serving!":"Temporarily Closed"))),i.a.createElement("div",{className:"ButtonContainer"},r?i.a.createElement(w,{hint:"Support this business",type:"primary",cta:"Shop online",href:r}):null),i.a.createElement("div",{className:"NotesContainer"},i.a.createElement("p",null,s)),c?i.a.createElement("div",{className:"StocklistContainer"},"Beans: ",c.join(",")):null,!v()||h?i.a.createElement("div",{className:"BottomContent"},l?i.a.createElement(y,{cta:l,href:l}):null,o?i.a.createElement(y,{cta:"@".concat(o),href:"https://instagram.com/".concat(o)}):null):null,i.a.createElement("div",{className:"Save","data-fav":f},i.a.createElement("button",{onClick:function(t){return e.onSave(t)}}))))}}]),a}(i.a.Component),F=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={detailViewActive:!1},n.slider=null,n.toggleDetailView=n.toggleDetailView.bind(Object(c.a)(n)),n}return Object(o.a)(a,[{key:"toggleDetailView",value:function(){if(v()){var e=this.state.detailViewActive;this.setState({detailViewActive:!e})}}},{key:"componentDidUpdate",value:function(e,t){this.props.cards.length,e.cards.length,this.props.selectedIndex,e.selectedIndex}},{key:"componentDidMount",value:function(){}},{key:"generateCards",value:function(){var e=this.props.cards,t=this.state.detailViewActive,a=[];return e.forEach((function(e,n){a.push(i.a.createElement("div",{key:n},i.a.createElement(A,{data:e,expanded:t})))})),a}},{key:"render",value:function(){var e,t=this,a=this.state.detailViewActive;e=this.generateCards();return i.a.createElement("div",{className:"SliderContainer","data-detail":a,onClick:this.toggleDetailView},e?i.a.createElement(k.a,{bullets:!1,onTransitionEnd:function(e){var a=e.currentIndex;(0,t.props.onChange)(a)},selected:this.props.selectedIndex,infinite:!1,organicArrows:!1,arrows:!0,fillParent:!0,mobileTouch:!a},e):null)}}]),a}(i.a.Component),M=(a(39),a(40),a(8)),N=a.n(M),S=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={lng:53.339961,lat:-6.24197,zoom:13,pitch:40},n.markers=[],N.a.accessToken="pk.eyJ1Ijoicm9nYnJpYW4iLCJhIjoiY2s2OWg5c2U1MDJ0aDNncnp4bTdjZXF2MyJ9.Fj1bsimkrQtfHjmTROe-SQ",n.initMapbox=n.initMapbox.bind(Object(c.a)(n)),n.generateMarkers=n.generateMarkers.bind(Object(c.a)(n)),n}return Object(o.a)(a,[{key:"generateMarkers",value:function(e){var t=this;this.markers.forEach((function(e){e.remove()})),this.markers=[];var a=this;e.forEach((function(e,n){var i=e.fields,r=i.Longitude,s=i.Latitude,l=i.Name,o=document.createElement("div");o.addEventListener("click",(function(){a.props.onMarkerClick(n)}));var c=e.id===t.props.selectedEntry.id?"Marker Selected":"Marker";o.className=c,o.dataset.fav=p(e.id),o.dataset.isopen=!0===e.fields.CovidOpen;var u=new N.a.Popup({offset:25}).setText(l),d=new N.a.Marker(o).setLngLat([r,s]).setPopup(u);t.markers.push(d)})),this.markers.forEach((function(e){e.addTo(a.map)}))}},{key:"componentDidUpdate",value:function(e,t){var a=this.props,n=a.allEntries,i=a.relevantEntries,r=a.selectedEntry,s=r.fields,l=s.Longitude,o=s.Latitude;e.allEntries[0]&&n[0].id!==e.allEntries[0].id&&this.initMapbox(),r.id!==e.selectedEntry.id&&(this.map.flyTo({center:[l,o],essential:!0,curve:.5,speed:1.5,zoom:14}),this.generateMarkers(i)),i.length!==e.relevantEntries.length&&this.generateMarkers(i)}},{key:"componentDidMount",value:function(){this.initMapbox()}},{key:"initMapbox",value:function(){var e=this.props.allEntries;this.map=new N.a.Map({container:this.mapContainer,style:"mapbox://styles/rogbrian/ck9foarv20v3o1ik6jze2yepc",center:[this.state.lat,this.state.lng],zoom:this.state.zoom,pitch:this.state.pitch}),this.map.addControl(new N.a.GeolocateControl({positionOptions:{enableHighAccuracy:!0},trackUserLocation:!0})),this.generateMarkers(e)}},{key:"render",value:function(){var e=this;return i.a.createElement("div",{className:"Container"},i.a.createElement("div",{className:"MapBoxTarget",ref:function(t){return e.mapContainer=t}}))}}]),a}(i.a.Component),I=(a(41),function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){return i.a.createElement("div",{className:"OtSpinner"},i.a.createElement("div",null),i.a.createElement("div",null),i.a.createElement("div",null),i.a.createElement("div",null))}}]),a}(i.a.Component)),O=a(23),j=a.n(O),x="https://api.airtable.com/v0/appSZqziDUsRsJFv6/pourover-db?&view=Grid%20view",L=a(9),U=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={allEntries:[],relevantEntries:[],selectedEntry:{},userLocation:[53.339961,-6.24197],filterViewActive:!1,filtersApplied:!1,isAwaitingData:!0,haveResults:!0},n.updateSelected=n.updateSelected.bind(Object(c.a)(n)),n.requestLocation=n.requestLocation.bind(Object(c.a)(n)),n.sortByNearby=n.sortByNearby.bind(Object(c.a)(n)),n.setEntries=n.setEntries.bind(Object(c.a)(n)),n.updateRelavent=n.updateRelavent.bind(Object(c.a)(n)),n.toggleMenu=n.toggleMenu.bind(Object(c.a)(n)),n.toggleFilterApplied=n.toggleFilterApplied.bind(Object(c.a)(n)),n}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.state.userLocation,a=t.latitude,n=t.longitude;L.a.initialize("UA-165438248-1"),L.a.pageview(window.location.pathname+window.location.search),function(e){var t=[],a=function(e){return e.fields&&e.fields.Name&&e.fields.Latitude&&e.fields.Longitude};!function e(n,i){j.a.get(n,{headers:{Authorization:"Bearer key7QpnzX5Kw0bc6V"}}).then((function(n){if(200===n.status)if(n.data.records.forEach((function(e){a(e)&&t.push(e)})),n.data.offset){var r="".concat(x,"&offset=").concat(n.data.offset);e(r,i)}else i(t)})).catch((function(e){console.log(e)})).then((function(){}))}(x,e)}((function(t){var i=e.sortByNearby(t,a,n);e.setEntries(i),e.requestLocation()}))}},{key:"toggleMenu",value:function(){this.setState({filterViewActive:!this.state.filterViewActive}),L.a.event({category:"Interaction",action:"Menu Toggle"})}},{key:"toggleFilterApplied",value:function(e){this.setState({filtersApplied:e}),L.a.event({category:"Interaction",action:"Filter Toggle"})}},{key:"setEntries",value:function(e){this.setState({allEntries:e,relevantEntries:e,selectedEntry:e[0],selectedIndex:0})}},{key:"updateSelected",value:function(e){var t=this.state.relevantEntries;this.setState({selectedEntry:t[e],selectedIndex:e}),L.a.event({category:"Interaction",action:"Card Swipe"})}},{key:"updateRelavent",value:function(e){e.length>0?this.setState({relevantEntries:e,selectedEntry:e[0],selectedIndex:0,haveResults:!0}):this.setState({haveResults:!1})}},{key:"requestLocation",value:function(){var e=this,t=this.state.allEntries;navigator.geolocation?(console.log("Locating\u2026"),navigator.geolocation.getCurrentPosition((function(a){var n=a.coords,i=n.latitude,r=n.longitude;console.log("Located",i,r),e.setState({userLocation:[i,r],isAwaitingData:!1});var s=e.sortByNearby(t,i,r);e.setEntries(s)}),(function(t){console.log("Error",t),e.setState({isAwaitingData:!1})}))):console.log("Geolocation is not supported by your browser")}},{key:"sortByNearby",value:function(e){var t=this.state.userLocation,a=[];return e.forEach((function(e){var n=e.fields,i=n.Latitude,r=n.Longitude,s=function(e,t,a,n,i){if(e===a&&t===n)return 0;var r=Math.PI*e/180,s=Math.PI*a/180,l=t-n,o=Math.PI*l/180,c=Math.sin(r)*Math.sin(s)+Math.cos(r)*Math.cos(s)*Math.cos(o);return c>1&&(c=1),c=60*(c=180*(c=Math.acos(c))/Math.PI)*1.1515,"K"===i&&(c*=1.609344),"N"===i&&(c*=.8684),c}(t[0],t[1],i,r,"K");e.distanceFromUser=Math.round(10*s)/10,a.push(e)})),a.sort((function(e,t){return e.distanceFromUser-t.distanceFromUser}))}},{key:"render",value:function(){var e=this.state,t=e.allEntries,a=e.relevantEntries,n=e.selectedEntry,r=e.selectedIndex,s=e.filterViewActive,l=e.filtersApplied,o=e.isAwaitingData,c=e.haveResults,u=a.length>1?"".concat(a.length," places"):"1 place";return c||(u="No results :("),i.a.createElement("div",{className:"App"},i.a.createElement(S,{allEntries:a,relevantEntries:a,selectedEntry:n,onMarkerClick:this.updateSelected}),i.a.createElement(F,{cards:a,onChange:this.updateSelected,selectedIndex:r}),i.a.createElement(E,{onFilter:this.updateRelavent,toggleFilterApplied:this.toggleFilterApplied,allEntries:t,active:s}),i.a.createElement("div",{className:"MenuToggle","data-active":s,onClick:this.toggleMenu,"data-filtersapplied":l,"data-disabled":!c},s?i.a.createElement("span",{className:"ToggleInnerActive"},"".concat(u)):i.a.createElement("span",{className:"ToggleInnerInActive"},i.a.createElement("span",null,"Menu"))),o?i.a.createElement("div",{className:"LoadingVeil"},i.a.createElement(I,null)):null)}}]),a}(i.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(U,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[24,1,2]]]);
//# sourceMappingURL=main.73d3588a.chunk.js.map